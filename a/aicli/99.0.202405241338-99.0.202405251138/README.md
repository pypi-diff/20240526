# Comparing `tmp/aicli-99.0.202405241338-py3-none-any.whl.zip` & `tmp/aicli-99.0.202405251138-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 40569 bytes, number of entries: 20
--rw-r--r--  2.0 unx    86465 b- defN 24-May-24 13:38 ailib/__init__.py
--rw-r--r--  2.0 unx    77090 b- defN 24-May-24 13:38 ailib/cli.py
--rw-r--r--  2.0 unx    15654 b- defN 24-May-24 13:38 ailib/common/__init__.py
--rw-r--r--  2.0 unx      975 b- defN 24-May-24 13:38 ailib/common/registries.conf.templ
--rw-r--r--  2.0 unx       58 b- defN 24-May-24 13:38 ailib/common/relocate/00-relocate-namespace.yaml
--rw-r--r--  2.0 unx      847 b- defN 24-May-24 13:38 ailib/common/relocate/10-relocate-ip.yaml
--rw-r--r--  2.0 unx       85 b- defN 24-May-24 13:38 ailib/common/relocate/97-relocate-sa.yaml
--rw-r--r--  2.0 unx      254 b- defN 24-May-24 13:38 ailib/common/relocate/98-relocate-binding.yaml
--rw-r--r--  2.0 unx      200 b- defN 24-May-24 13:38 ailib/common/relocate/99-ovn.yaml
--rw-r--r--  2.0 unx     1083 b- defN 24-May-24 13:38 ailib/common/relocate/99-relocate-job.yaml
--rw-r--r--  2.0 unx      752 b- defN 24-May-24 13:38 ailib/common/relocate/hack.ign
--rw-r--r--  2.0 unx      196 b- defN 24-May-24 13:38 ailib/common/relocate/hack.sh
--rw-r--r--  2.0 unx      169 b- defN 24-May-24 13:38 ailib/common/relocate/hack_sno.sh
--rw-r--r--  2.0 unx      728 b- defN 24-May-24 13:38 ailib/common/relocate/relocate-ip.sh
--rw-r--r--  2.0 unx    13060 b- defN 24-May-24 13:38 ailib/kfish/__init__.py
--rw-r--r--  2.0 unx      352 b- defN 24-May-24 13:38 aicli-99.0.202405241338.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-24 13:38 aicli-99.0.202405241338.dist-info/WHEEL
--rw-r--r--  2.0 unx       40 b- defN 24-May-24 13:38 aicli-99.0.202405241338.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        6 b- defN 24-May-24 13:38 aicli-99.0.202405241338.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1777 b- defN 24-May-24 13:38 aicli-99.0.202405241338.dist-info/RECORD
-20 files, 199883 bytes uncompressed, 37613 bytes compressed:  81.2%
+Zip file size: 40553 bytes, number of entries: 20
+-rw-r--r--  2.0 unx    86193 b- defN 24-May-25 11:37 ailib/__init__.py
+-rw-r--r--  2.0 unx    77090 b- defN 24-May-25 11:37 ailib/cli.py
+-rw-r--r--  2.0 unx    15654 b- defN 24-May-25 11:37 ailib/common/__init__.py
+-rw-r--r--  2.0 unx      975 b- defN 24-May-25 11:37 ailib/common/registries.conf.templ
+-rw-r--r--  2.0 unx       58 b- defN 24-May-25 11:37 ailib/common/relocate/00-relocate-namespace.yaml
+-rw-r--r--  2.0 unx      847 b- defN 24-May-25 11:37 ailib/common/relocate/10-relocate-ip.yaml
+-rw-r--r--  2.0 unx       85 b- defN 24-May-25 11:37 ailib/common/relocate/97-relocate-sa.yaml
+-rw-r--r--  2.0 unx      254 b- defN 24-May-25 11:37 ailib/common/relocate/98-relocate-binding.yaml
+-rw-r--r--  2.0 unx      200 b- defN 24-May-25 11:37 ailib/common/relocate/99-ovn.yaml
+-rw-r--r--  2.0 unx     1083 b- defN 24-May-25 11:37 ailib/common/relocate/99-relocate-job.yaml
+-rw-r--r--  2.0 unx      752 b- defN 24-May-25 11:37 ailib/common/relocate/hack.ign
+-rw-r--r--  2.0 unx      196 b- defN 24-May-25 11:37 ailib/common/relocate/hack.sh
+-rw-r--r--  2.0 unx      169 b- defN 24-May-25 11:37 ailib/common/relocate/hack_sno.sh
+-rw-r--r--  2.0 unx      728 b- defN 24-May-25 11:37 ailib/common/relocate/relocate-ip.sh
+-rw-r--r--  2.0 unx    13060 b- defN 24-May-25 11:37 ailib/kfish/__init__.py
+-rw-r--r--  2.0 unx      352 b- defN 24-May-25 11:38 aicli-99.0.202405251138.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-25 11:38 aicli-99.0.202405251138.dist-info/WHEEL
+-rw-r--r--  2.0 unx       40 b- defN 24-May-25 11:38 aicli-99.0.202405251138.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        6 b- defN 24-May-25 11:38 aicli-99.0.202405251138.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1777 b- defN 24-May-25 11:38 aicli-99.0.202405251138.dist-info/RECORD
+20 files, 199611 bytes uncompressed, 37597 bytes compressed:  81.2%
```

## zipnote {}

```diff
@@ -39,23 +39,23 @@
 
 Filename: ailib/common/relocate/relocate-ip.sh
 Comment: 
 
 Filename: ailib/kfish/__init__.py
 Comment: 
 
-Filename: aicli-99.0.202405241338.dist-info/METADATA
+Filename: aicli-99.0.202405251138.dist-info/METADATA
 Comment: 
 
-Filename: aicli-99.0.202405241338.dist-info/WHEEL
+Filename: aicli-99.0.202405251138.dist-info/WHEEL
 Comment: 
 
-Filename: aicli-99.0.202405241338.dist-info/entry_points.txt
+Filename: aicli-99.0.202405251138.dist-info/entry_points.txt
 Comment: 
 
-Filename: aicli-99.0.202405241338.dist-info/top_level.txt
+Filename: aicli-99.0.202405251138.dist-info/top_level.txt
 Comment: 
 
-Filename: aicli-99.0.202405241338.dist-info/RECORD
+Filename: aicli-99.0.202405251138.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ailib/__init__.py

```diff
@@ -1009,42 +1009,56 @@
                     info(f"Updating host with id {host_id}")
                     host_update_params = models.HostUpdateParams(**host_update_params)
                     self.client.v2_update_host(infra_env_id=infra_env_id, host_id=host_id,
                                                host_update_params=host_update_params)
                 elif not bind_updated and not extra_args_updated and not ignition_updated:
                     warning("Nothing updated for this host")
 
-    def wait_hosts(self, name, number=3, filter_installed=False, require_inventory=False, filter_insufficient=False):
+    def wait_hosts(self, name, number=3):
         client = self.client
         self.refresh_token(self.token, self.offlinetoken)
         infra_env_id = self.get_infra_env_id(name)
         infra_env = client.get_infra_env(infra_env_id=infra_env_id)
         cluster_id = infra_env.cluster_id
         if cluster_id is not None and client.v2_get_cluster(cluster_id=cluster_id).high_availability_mode == 'None':
             number = 1
         info(f"Waiting for hosts to reach expected number {number}", quiet=self.quiet)
-        installed = ['installed', 'added-to-existing-cluster']
         while True:
             try:
-                current_hosts = client.v2_list_hosts(infra_env_id=infra_env_id)
-                if require_inventory:
-                    current_hosts = [h for h in current_hosts if 'inventory' in h]
-                if filter_installed:
-                    current_hosts = [h for h in current_hosts if h['status'] not in installed]
-                if filter_insufficient:
-                    current_hosts = [h for h in current_hosts if h['status'] not in ['insufficient', 'discovering']]
-                if len(current_hosts) >= number:
+                current_hosts = [h for h in client.v2_list_hosts(infra_env_id=infra_env_id) if h['status'] == 'known']
+                if len(current_hosts) == number:
                     return
                 else:
                     sleep(5)
                     self.refresh_token(self.token, self.offlinetoken)
             except KeyboardInterrupt:
                 info("Leaving as per your request")
                 sys.exit(0)
 
+    def wait_hosts_added(self, hosts=[], infraenv=None):
+        self.refresh_token(self.token, self.offlinetoken)
+        if infraenv is None:
+            infra_env_id = [h['infra_env_id'] for h in self.list_hosts() if h['requested_hostname'] in hosts][0]
+        else:
+            infra_env_id = self.get_infra_env_id(infraenv)
+        info("Waiting for all hosts to be added to cluster", quiet=self.quiet)
+        while True:
+            try:
+                all_hosts = self.client.v2_list_hosts(infra_env_id=infra_env_id)
+                ihosts = [h for h in all_hosts if h['requested_hostname'] in hosts and
+                          h['status'] == 'added-to-existing-cluster']
+                if len(ihosts) == len(hosts):
+                    break
+                else:
+                    sleep(5)
+                    self.refresh_token(self.token, self.offlinetoken)
+            except KeyboardInterrupt:
+                info("Leaving as per your request")
+                sys.exit(0)
+
     def wait_cluster(self, name, status='installed'):
         cluster_id = self.get_cluster_id(name)
         info(f"Waiting for cluster {name} to reach state {status}", quiet=self.quiet)
         while True:
             try:
                 cluster_info = self.client.v2_get_cluster(cluster_id=cluster_id).to_dict()
                 if status == 'ready':
@@ -1560,15 +1574,15 @@
         elif 'hosts' in overrides and isinstance(overrides['hosts'], list):
             hosts_number = len(overrides.get('hosts'))
         elif 'sno' in overrides and overrides['sno']:
             hosts_number = 1
         else:
             hosts_number = 3
         info(f"Setting hosts_number to {hosts_number}")
-        self.wait_hosts(infraenv, hosts_number, filter_installed=True, require_inventory=True)
+        self.wait_hosts(infraenv, hosts_number)
         if 'hosts' in overrides:
             self.update_hosts([], overrides)
         self.update_cluster(cluster, overrides)
         self.wait_cluster(cluster, 'ready')
         self.start_cluster(cluster)
         self.wait_cluster(cluster)
         info(f"Downloading Kubeconfig for Cluster {cluster} in current directory")
@@ -1621,26 +1635,13 @@
         info(f"Setting hosts_number to {hosts_number}")
         if 'hosts' in overrides:
             boot_overrides = overrides.copy()
             boot_overrides['cluster'] = cluster
             boot_result = boot_hosts(boot_overrides, debug=debug)
             if boot_result != 0:
                 return {'result': 'failure', 'reason': 'Hit issue when booting hosts'}
-        self.wait_hosts(infraenv, hosts_number, filter_installed=True, require_inventory=True, filter_insufficient=True)
+        self.wait_hosts(infraenv, hosts_number)
         installed = ['installed', 'added-to-existing-cluster']
         hosts = [h['requested_hostname'] for h in self.list_hosts() if h['status'] not in installed]
         self.start_hosts(hosts)
-        info("Waiting for new hosts to be installed", quiet=self.quiet)
-        infra_env_id = self.get_infra_env_id(f"{cluster}_infra-env")
-        while True:
-            try:
-                all_hosts = self.client.v2_list_hosts(infra_env_id=infra_env_id)
-                ihosts = [h for h in all_hosts if h['requested_hostname'] in hosts and h['status'] == 'installed']
-                if len(ihosts) == len(hosts):
-                    break
-                else:
-                    sleep(5)
-                    self.refresh_token(self.token, self.offlinetoken)
-            except KeyboardInterrupt:
-                info("Leaving as per your request")
-                sys.exit(0)
+        self.wait_hosts_added(hosts, infraenv)
         return {'result': 'success'}
```

## Comparing `aicli-99.0.202405241338.dist-info/RECORD` & `aicli-99.0.202405251138.dist-info/RECORD`

 * *Files 18% similar despite different names*

```diff
@@ -1,20 +1,20 @@
-ailib/__init__.py,sha256=tC8-qfIEYuiaqzI68qQW592GQN9Jkd11swQNVs112R4,86465
+ailib/__init__.py,sha256=AsV4Eo6IwjNNMm4jAu8d9sYNaZlI42SE3NtX_vbmpUU,86193
 ailib/cli.py,sha256=wO90oVLQxvhoJZcOyOMRSEDpJZOyLLvzjGYoAkRSLmg,77090
 ailib/common/__init__.py,sha256=zF6Yd9W03sK6n4Ft5mV6geWlbc7DbKwgFpsrCfclAM4,15654
 ailib/common/registries.conf.templ,sha256=4-QCZhi53vARMQztzjSPBx63WMY7naWBhYMJvJ9TNL4,975
 ailib/common/relocate/00-relocate-namespace.yaml,sha256=GcYRATh9o2xR091jMydeM9-jgnugYsNg3r9kzgCir8I,58
 ailib/common/relocate/10-relocate-ip.yaml,sha256=qKHvnn1-xyvROjuyl1f4TXqItGmERJ8GqizzstocOo0,847
 ailib/common/relocate/97-relocate-sa.yaml,sha256=cUOmmQJG9Yzhad1ZnW_utpqLEWtRgl7qUX-pmc508rI,85
 ailib/common/relocate/98-relocate-binding.yaml,sha256=rZmKz4Ev9-VtJVMT8CbkpcIWJ6ZfK9Qy809b5DK3KHw,254
 ailib/common/relocate/99-ovn.yaml,sha256=x5ActE4VnDw0s2YZr2RV9bRijttztaiHktkSm9neQII,200
 ailib/common/relocate/99-relocate-job.yaml,sha256=SsufiIEoeNJzZ8bGZtlYI14_V08_xnuHCt6ufeKRxfE,1083
 ailib/common/relocate/hack.ign,sha256=LvCDvzZyC5Apzik-OmJZMBG4MlkBsCm91OMt7NBwJtI,752
 ailib/common/relocate/hack.sh,sha256=X-FqHruR9IzlaUVtJc_NQnOyyG_zp45iUcb0pTRsgE0,196
 ailib/common/relocate/hack_sno.sh,sha256=gLVNgk0A7gu-MJnO2qV-ZeIKxSUYPm_Wtxix5EDqAkc,169
 ailib/common/relocate/relocate-ip.sh,sha256=hD-z8wDk-ZDIcmxo384pGXqxmEkPXT5icM7A_h1in0Q,728
 ailib/kfish/__init__.py,sha256=gl-cIRHWy84gmHlWeXKdH_GsmUR3EWw8ocMGRcUzFuk,13060
-aicli-99.0.202405241338.dist-info/METADATA,sha256=HilPK2CeoMaA3FmoISnhAcYyoO2cOJHjUjqYWY7Bu-g,352
-aicli-99.0.202405241338.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-aicli-99.0.202405241338.dist-info/entry_points.txt,sha256=7uqZ_1svrJHY6WVurmsOhlEb_FiRFEgdEnKj_7BuT0Q,40
-aicli-99.0.202405241338.dist-info/top_level.txt,sha256=uCyBeu-We3_G6jzv4SY05Rg3VHcZ2_Dr7dcFduB8Wsw,6
-aicli-99.0.202405241338.dist-info/RECORD,,
+aicli-99.0.202405251138.dist-info/METADATA,sha256=gPKqxEryMKVmd6N3NQwjYLAfu4fomQeZpxu_IiThkjY,352
+aicli-99.0.202405251138.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+aicli-99.0.202405251138.dist-info/entry_points.txt,sha256=7uqZ_1svrJHY6WVurmsOhlEb_FiRFEgdEnKj_7BuT0Q,40
+aicli-99.0.202405251138.dist-info/top_level.txt,sha256=uCyBeu-We3_G6jzv4SY05Rg3VHcZ2_Dr7dcFduB8Wsw,6
+aicli-99.0.202405251138.dist-info/RECORD,,
```

