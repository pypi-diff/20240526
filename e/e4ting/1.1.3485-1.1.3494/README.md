# Comparing `tmp/e4ting-1.1.3485-py3-none-any.whl.zip` & `tmp/e4ting-1.1.3494-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,82 +1,82 @@
-Zip file size: 117742 bytes, number of entries: 80
--rw-r--r--  2.0 unx     5982 b- defN 24-May-26 05:12 celerys/__init__.py
--rw-r--r--  2.0 unx     3339 b- defN 24-May-26 05:12 celerys/app.py
--rw-r--r--  2.0 unx      802 b- defN 24-May-26 05:12 celerys/test.app.py
--rw-r--r--  2.0 unx     1301 b- defN 24-May-26 05:12 celerys/test.client.py
--rw-r--r--  2.0 unx     1804 b- defN 24-May-26 05:12 celerys/wsapp.py
--rw-r--r--  2.0 unx        0 b- defN 24-May-26 05:12 celerys/tasks/__init__.py
--rw-r--r--  2.0 unx    10115 b- defN 24-May-26 05:12 celerys/tasks/server.py
--rw-r--r--  2.0 unx     4038 b- defN 24-May-26 05:12 celerys/tasks/task.py
--rw-r--r--  2.0 unx      419 b- defN 24-May-26 05:12 common/__init__.py
--rw-r--r--  2.0 unx     1075 b- defN 24-May-26 05:12 common/ai.py
--rw-r--r--  2.0 unx    12296 b- defN 24-May-26 05:12 common/baserequest.py
--rw-r--r--  2.0 unx     2235 b- defN 24-May-26 05:12 common/capture.py
--rw-r--r--  2.0 unx     5710 b- defN 24-May-26 05:12 common/dbpoker.py
--rw-r--r--  2.0 unx     8034 b- defN 24-May-26 05:12 common/mongo.py
--rw-r--r--  2.0 unx    22846 b- defN 24-May-26 05:12 common/util.py
--rw-r--r--  2.0 unx     3880 b- defN 24-May-26 05:12 common/utilaliyun.py
--rw-r--r--  2.0 unx     4420 b- defN 24-May-26 05:12 common/utilcache.py
--rw-r--r--  2.0 unx     2448 b- defN 24-May-26 05:12 common/utildingtalk.py
--rw-r--r--  2.0 unx     5421 b- defN 24-May-26 05:12 common/utilmail.py
--rw-r--r--  2.0 unx     1498 b- defN 24-May-26 05:12 common/utilparallel.py
--rw-r--r--  2.0 unx    23958 b- defN 24-May-26 05:12 common/utilredis.py
--rw-r--r--  2.0 unx     2842 b- defN 24-May-26 05:12 common/utils.py
--rw-r--r--  2.0 unx     2952 b- defN 24-May-26 05:12 common/utilsamba.py
--rw-r--r--  2.0 unx     3010 b- defN 24-May-26 05:12 common/utiltask.py
--rw-r--r--  2.0 unx    11837 b- defN 24-May-26 05:12 common/utilui.py
--rw-r--r--  2.0 unx    23304 b- defN 24-May-26 05:12 common/utilwechat.py
--rw-r--r--  2.0 unx     3624 b- defN 24-May-26 05:12 common/weixin.py
--rw-r--r--  2.0 unx      681 b- defN 24-May-26 05:12 e4ting/__init__.py
--rw-r--r--  2.0 unx      130 b- defN 24-May-26 05:12 e4ting/acl/__init__.py
--rw-r--r--  2.0 unx     2324 b- defN 24-May-26 05:12 e4ting/acl/base.py
--rwxr-xr-x  2.0 unx      267 b- defN 24-May-26 05:12 e4ting/acl/models/admin.model
--rwxr-xr-x  2.0 unx       73 b- defN 24-May-26 05:12 e4ting/acl/models/admin.policy
--rw-r--r--  2.0 unx     1517 b- defN 24-May-26 05:12 e4ting/api/__init__.py
--rw-r--r--  2.0 unx     6049 b- defN 24-May-26 05:12 e4ting/api/cas.py
--rw-r--r--  2.0 unx     1247 b- defN 24-May-26 05:12 e4ting/api/frp.py
--rw-r--r--  2.0 unx    10613 b- defN 24-May-26 05:12 e4ting/api/spug.py
--rw-r--r--  2.0 unx      402 b- defN 24-May-26 05:12 e4ting/cache/__init__.py
--rw-r--r--  2.0 unx     6227 b- defN 24-May-26 05:12 e4ting/cache/cache.py
--rw-r--r--  2.0 unx      183 b- defN 24-May-26 05:12 e4ting/cluster/__init__.py
--rw-r--r--  2.0 unx     3935 b- defN 24-May-26 05:12 e4ting/cluster/callee.py
--rw-r--r--  2.0 unx     7394 b- defN 24-May-26 05:12 e4ting/cluster/cloud.py
--rw-r--r--  2.0 unx     2624 b- defN 24-May-26 05:12 e4ting/cluster/control.py
--rw-r--r--  2.0 unx     8457 b- defN 24-May-26 05:12 e4ting/cluster/fuse.py
--rw-r--r--  2.0 unx      362 b- defN 24-May-26 05:12 e4ting/db/__init__.py
--rw-r--r--  2.0 unx     1464 b- defN 24-May-26 05:12 e4ting/db/kaf.py
--rw-r--r--  2.0 unx     7049 b- defN 24-May-26 05:12 e4ting/db/pymongos.py
--rw-r--r--  2.0 unx     2698 b- defN 24-May-26 05:12 e4ting/db/utilredis.py
--rw-r--r--  2.0 unx      938 b- defN 24-May-26 05:12 e4ting/etc/__init__.py
--rw-r--r--  2.0 unx     2863 b- defN 24-May-26 05:12 e4ting/etc/utilyaml.py
--rw-r--r--  2.0 unx     1203 b- defN 24-May-26 05:12 e4ting/log/__init__.py
--rw-r--r--  2.0 unx     2167 b- defN 24-May-26 05:12 e4ting/log/all_exception.py
--rw-r--r--  2.0 unx     1252 b- defN 24-May-26 05:12 e4ting/log/otherhandle.py
--rw-r--r--  2.0 unx      162 b- defN 24-May-26 05:12 e4ting/net/__init__.py
--rw-r--r--  2.0 unx     1363 b- defN 24-May-26 05:12 e4ting/net/iface.py
--rw-r--r--  2.0 unx      174 b- defN 24-May-26 05:12 e4ting/server/__init__.py
--rw-r--r--  2.0 unx      580 b- defN 24-May-26 05:12 e4ting/server/call.py
--rw-r--r--  2.0 unx     8385 b- defN 24-May-26 05:12 e4ting/server/e4ting_pb2.py
--rw-r--r--  2.0 unx    29967 b- defN 24-May-26 05:12 e4ting/server/e4ting_pb2_grpc.py
--rw-r--r--  2.0 unx     2127 b- defN 24-May-26 05:12 e4ting/server/restful.py
--rw-r--r--  2.0 unx     1404 b- defN 24-May-26 05:12 e4ting/server/rpc.py
--rw-r--r--  2.0 unx     1420 b- defN 24-May-26 05:12 e4ting/server/util.py
--rw-r--r--  2.0 unx      168 b- defN 24-May-26 05:12 e4ting/task/__init__.py
--rw-r--r--  2.0 unx     4305 b- defN 24-May-26 05:12 e4ting/task/base.py
--rw-r--r--  2.0 unx     2241 b- defN 24-May-26 05:12 e4ting/task/celeryproxy.py
--rw-r--r--  2.0 unx     1416 b- defN 24-May-26 05:12 e4ting/task/master.py
--rw-r--r--  2.0 unx     1966 b- defN 24-May-26 05:12 e4ting/task/worker.py
--rw-r--r--  2.0 unx      420 b- defN 24-May-26 05:12 e4ting/util/__init__.py
--rw-r--r--  2.0 unx    22823 b- defN 24-May-26 05:12 e4ting/util/common.py
--rw-r--r--  2.0 unx     1992 b- defN 24-May-26 05:12 e4ting/util/feichang.py
--rw-r--r--  2.0 unx     6067 b- defN 24-May-26 05:12 e4ting/util/fuser.py
--rw-r--r--  2.0 unx     3091 b- defN 24-May-26 05:12 e4ting/util/hardware.py
--rw-r--r--  2.0 unx     1799 b- defN 24-May-26 05:12 e4ting/util/hidden.py
--rw-r--r--  2.0 unx     7172 b- defN 24-May-26 05:12 e4ting/util/remote_fuser.py
--rw-r--r--  2.0 unx      705 b- defN 24-May-26 05:12 e4ting/util/rsa.py
--rw-r--r--  2.0 unx     2038 b- defN 24-May-26 05:12 e4ting/util/url2img.py
--rw-r--r--  2.0 unx     9242 b- defN 24-May-26 05:12 e4ting/util/util.py
--rw-r--r--  2.0 unx       54 b- defN 24-May-26 05:12 e4ting-1.1.3485.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-26 05:12 e4ting-1.1.3485.dist-info/WHEEL
--rw-r--r--  2.0 unx       22 b- defN 24-May-26 05:12 e4ting-1.1.3485.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     6214 b- defN 24-May-26 05:12 e4ting-1.1.3485.dist-info/RECORD
-80 files, 358718 bytes uncompressed, 108190 bytes compressed:  69.8%
+Zip file size: 118895 bytes, number of entries: 80
+-rw-r--r--  2.0 unx     5982 b- defN 24-May-26 14:56 celerys/__init__.py
+-rw-r--r--  2.0 unx     3339 b- defN 24-May-26 14:56 celerys/app.py
+-rw-r--r--  2.0 unx      802 b- defN 24-May-26 14:56 celerys/test.app.py
+-rw-r--r--  2.0 unx     1301 b- defN 24-May-26 14:56 celerys/test.client.py
+-rw-r--r--  2.0 unx     1804 b- defN 24-May-26 14:56 celerys/wsapp.py
+-rw-r--r--  2.0 unx        0 b- defN 24-May-26 14:56 celerys/tasks/__init__.py
+-rw-r--r--  2.0 unx    10115 b- defN 24-May-26 14:56 celerys/tasks/server.py
+-rw-r--r--  2.0 unx     4038 b- defN 24-May-26 14:56 celerys/tasks/task.py
+-rw-r--r--  2.0 unx      419 b- defN 24-May-26 14:56 common/__init__.py
+-rw-r--r--  2.0 unx     1075 b- defN 24-May-26 14:56 common/ai.py
+-rw-r--r--  2.0 unx    12296 b- defN 24-May-26 14:56 common/baserequest.py
+-rw-r--r--  2.0 unx     2235 b- defN 24-May-26 14:56 common/capture.py
+-rw-r--r--  2.0 unx     5710 b- defN 24-May-26 14:56 common/dbpoker.py
+-rw-r--r--  2.0 unx     8034 b- defN 24-May-26 14:56 common/mongo.py
+-rw-r--r--  2.0 unx    22846 b- defN 24-May-26 14:56 common/util.py
+-rw-r--r--  2.0 unx     3880 b- defN 24-May-26 14:56 common/utilaliyun.py
+-rw-r--r--  2.0 unx     4420 b- defN 24-May-26 14:56 common/utilcache.py
+-rw-r--r--  2.0 unx     2448 b- defN 24-May-26 14:56 common/utildingtalk.py
+-rw-r--r--  2.0 unx     5421 b- defN 24-May-26 14:56 common/utilmail.py
+-rw-r--r--  2.0 unx     1498 b- defN 24-May-26 14:56 common/utilparallel.py
+-rw-r--r--  2.0 unx    23958 b- defN 24-May-26 14:56 common/utilredis.py
+-rw-r--r--  2.0 unx     2842 b- defN 24-May-26 14:56 common/utils.py
+-rw-r--r--  2.0 unx     2952 b- defN 24-May-26 14:56 common/utilsamba.py
+-rw-r--r--  2.0 unx     3010 b- defN 24-May-26 14:56 common/utiltask.py
+-rw-r--r--  2.0 unx    11837 b- defN 24-May-26 14:56 common/utilui.py
+-rw-r--r--  2.0 unx    23304 b- defN 24-May-26 14:56 common/utilwechat.py
+-rw-r--r--  2.0 unx     3624 b- defN 24-May-26 14:56 common/weixin.py
+-rw-r--r--  2.0 unx      681 b- defN 24-May-26 14:56 e4ting/__init__.py
+-rw-r--r--  2.0 unx      130 b- defN 24-May-26 14:56 e4ting/acl/__init__.py
+-rw-r--r--  2.0 unx     2324 b- defN 24-May-26 14:56 e4ting/acl/base.py
+-rwxr-xr-x  2.0 unx      267 b- defN 24-May-26 14:56 e4ting/acl/models/admin.model
+-rwxr-xr-x  2.0 unx       73 b- defN 24-May-26 14:56 e4ting/acl/models/admin.policy
+-rw-r--r--  2.0 unx     1517 b- defN 24-May-26 14:56 e4ting/api/__init__.py
+-rw-r--r--  2.0 unx     6049 b- defN 24-May-26 14:56 e4ting/api/cas.py
+-rw-r--r--  2.0 unx     1247 b- defN 24-May-26 14:56 e4ting/api/frp.py
+-rw-r--r--  2.0 unx    10613 b- defN 24-May-26 14:56 e4ting/api/spug.py
+-rw-r--r--  2.0 unx      402 b- defN 24-May-26 14:56 e4ting/cache/__init__.py
+-rw-r--r--  2.0 unx     6227 b- defN 24-May-26 14:56 e4ting/cache/cache.py
+-rw-r--r--  2.0 unx      183 b- defN 24-May-26 14:56 e4ting/cluster/__init__.py
+-rw-r--r--  2.0 unx     3935 b- defN 24-May-26 14:56 e4ting/cluster/callee.py
+-rw-r--r--  2.0 unx     7394 b- defN 24-May-26 14:56 e4ting/cluster/cloud.py
+-rw-r--r--  2.0 unx     2624 b- defN 24-May-26 14:56 e4ting/cluster/control.py
+-rw-r--r--  2.0 unx     8457 b- defN 24-May-26 14:56 e4ting/cluster/fuse.py
+-rw-r--r--  2.0 unx      362 b- defN 24-May-26 14:56 e4ting/db/__init__.py
+-rw-r--r--  2.0 unx     1464 b- defN 24-May-26 14:56 e4ting/db/kaf.py
+-rw-r--r--  2.0 unx     7049 b- defN 24-May-26 14:56 e4ting/db/pymongos.py
+-rw-r--r--  2.0 unx     2698 b- defN 24-May-26 14:56 e4ting/db/utilredis.py
+-rw-r--r--  2.0 unx      938 b- defN 24-May-26 14:56 e4ting/etc/__init__.py
+-rw-r--r--  2.0 unx     2863 b- defN 24-May-26 14:56 e4ting/etc/utilyaml.py
+-rw-r--r--  2.0 unx     1203 b- defN 24-May-26 14:56 e4ting/log/__init__.py
+-rw-r--r--  2.0 unx     2167 b- defN 24-May-26 14:56 e4ting/log/all_exception.py
+-rw-r--r--  2.0 unx     1252 b- defN 24-May-26 14:56 e4ting/log/otherhandle.py
+-rw-r--r--  2.0 unx      162 b- defN 24-May-26 14:56 e4ting/net/__init__.py
+-rw-r--r--  2.0 unx     1363 b- defN 24-May-26 14:56 e4ting/net/iface.py
+-rw-r--r--  2.0 unx      174 b- defN 24-May-26 14:56 e4ting/server/__init__.py
+-rw-r--r--  2.0 unx      580 b- defN 24-May-26 14:56 e4ting/server/call.py
+-rw-r--r--  2.0 unx     8385 b- defN 24-May-26 14:56 e4ting/server/e4ting_pb2.py
+-rw-r--r--  2.0 unx    29967 b- defN 24-May-26 14:56 e4ting/server/e4ting_pb2_grpc.py
+-rw-r--r--  2.0 unx     2127 b- defN 24-May-26 14:56 e4ting/server/restful.py
+-rw-r--r--  2.0 unx     1404 b- defN 24-May-26 14:56 e4ting/server/rpc.py
+-rw-r--r--  2.0 unx     1420 b- defN 24-May-26 14:56 e4ting/server/util.py
+-rw-r--r--  2.0 unx      168 b- defN 24-May-26 14:56 e4ting/task/__init__.py
+-rw-r--r--  2.0 unx     4305 b- defN 24-May-26 14:56 e4ting/task/base.py
+-rw-r--r--  2.0 unx     2241 b- defN 24-May-26 14:56 e4ting/task/celeryproxy.py
+-rw-r--r--  2.0 unx     1416 b- defN 24-May-26 14:56 e4ting/task/master.py
+-rw-r--r--  2.0 unx     1966 b- defN 24-May-26 14:56 e4ting/task/worker.py
+-rw-r--r--  2.0 unx      420 b- defN 24-May-26 14:56 e4ting/util/__init__.py
+-rw-r--r--  2.0 unx    22896 b- defN 24-May-26 14:56 e4ting/util/common.py
+-rw-r--r--  2.0 unx     1992 b- defN 24-May-26 14:56 e4ting/util/feichang.py
+-rw-r--r--  2.0 unx     6067 b- defN 24-May-26 14:56 e4ting/util/fuser.py
+-rw-r--r--  2.0 unx     3091 b- defN 24-May-26 14:56 e4ting/util/hardware.py
+-rw-r--r--  2.0 unx     5163 b- defN 24-May-26 14:56 e4ting/util/hidden.py
+-rw-r--r--  2.0 unx     7172 b- defN 24-May-26 14:56 e4ting/util/remote_fuser.py
+-rw-r--r--  2.0 unx      705 b- defN 24-May-26 14:56 e4ting/util/rsa.py
+-rw-r--r--  2.0 unx     2038 b- defN 24-May-26 14:56 e4ting/util/url2img.py
+-rw-r--r--  2.0 unx     9242 b- defN 24-May-26 14:56 e4ting/util/util.py
+-rw-r--r--  2.0 unx       54 b- defN 24-May-26 14:56 e4ting-1.1.3494.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-26 14:56 e4ting-1.1.3494.dist-info/WHEEL
+-rw-r--r--  2.0 unx       22 b- defN 24-May-26 14:56 e4ting-1.1.3494.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     6214 b- defN 24-May-26 14:56 e4ting-1.1.3494.dist-info/RECORD
+80 files, 362155 bytes uncompressed, 109343 bytes compressed:  69.8%
```

## zipnote {}

```diff
@@ -222,20 +222,20 @@
 
 Filename: e4ting/util/url2img.py
 Comment: 
 
 Filename: e4ting/util/util.py
 Comment: 
 
-Filename: e4ting-1.1.3485.dist-info/METADATA
+Filename: e4ting-1.1.3494.dist-info/METADATA
 Comment: 
 
-Filename: e4ting-1.1.3485.dist-info/WHEEL
+Filename: e4ting-1.1.3494.dist-info/WHEEL
 Comment: 
 
-Filename: e4ting-1.1.3485.dist-info/top_level.txt
+Filename: e4ting-1.1.3494.dist-info/top_level.txt
 Comment: 
 
-Filename: e4ting-1.1.3485.dist-info/RECORD
+Filename: e4ting-1.1.3494.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## e4ting/util/common.py

```diff
@@ -97,14 +97,16 @@
     from io   import StringIO
     from gzip import GzipFile
     data = GzipFile(fileobj=StringIO(data)).read()
     return data
 
 def md5(data):
     import hashlib
+    if type(data) is bytes:
+        return hashlib.md5(data).hexdigest()
     return hashlib.md5(data.encode(encoding='UTF-8')).hexdigest()
 
 def md5sum(filename):
     with open(filename, "rb") as fp:
         data = fp.read()
 
     import hashlib
```

## e4ting/util/hidden.py

```diff
@@ -5,57 +5,160 @@
     Add By :陈狍子 e4ting@qq.com 2024-05-25 23:23:32
 """
 import sys,os
 from pdb import set_trace as strace
 from traceback  import format_exc as dumpstack
 from e4ting import util,log
 
+'''
+'''
+
+class SM2():
+    def __init__(self, key="", pub=""):
+        if os.path.exists(key):
+            self.key = open(key).read()
+        else:
+            self.key = key
+        if os.path.exists(pub):
+            self.pub = open(pub).read()
+        else:
+            self.pub = pub
+
+    def sign(self, data="", file=""):
+        if os.path.exists(file):
+            data = open(file).read().encde("utf-8")
+        # else:
+        #     data = data.encode()
+
+        from gmssl import sm2
+        sm2_crypt = sm2.CryptSM2(public_key=self.pub, private_key=self.key)
+        # 签名
+        # strace()
+        signature = sm2_crypt.sign_with_sm3(data)
+        # log.info((signature, sm2_crypt.verify_with_sm3(signature, data) , util.md5(data) ))
+        return signature
+
+    def verify(self, sign, data=b'', file=""):
+        if os.path.exists(file):
+            data = open(file).read()
+        from gmssl import sm2
+        sm2_crypt = sm2.CryptSM2(public_key=self.pub, private_key="")
+        return sm2_crypt.verify_with_sm3(sign, data)
+
 class Hidden():
+    def __init__(self, inputs, output, attach=None, tool=None):
+        self.input  = inputs
+        self.output = output
+        self.attach = attach
+        self.tool   = tool
+
     def read(self):
         import piexif
-        exif_data = piexif.load("one_pixel.jpg")
-
-        sign = exif_data["0th"].get(piexif.ImageIFD.Artist)
-        if sign:
-            log.info( sign.decode("utf-8"))
-
-        user_comment = exif_data["Exif"].get(piexif.ExifIFD.UserComment)
-        if user_comment:
-            return user_comment.decode("utf-8")
-        else:
-            return "No user comment found in EXIF data."
+        exif_data = piexif.load(self.input)
+        # sign = exif_data["0th"].get(piexif.ImageIFD.Artist)
+        # if sign:
+        #     log.info( sign.decode("utf-8"))
+        sign = exif_data["Exif"].get(piexif.ExifIFD.UserComment).decode("utf-8")
 
+        from PIL import Image
+        with Image.open(self.input) as img:
+            # 尝试从图像信息中获取ICC配置
+            icc_profile = img.info.get("icc_profile")
+        ret = self.tool.verify(sign, icc_profile)
+        log.info( ( "签名校验 : ", ret) )
+        return icc_profile
 
     def write(self):
+        from PIL import Image
+        from PIL.ExifTags import TAGS, GPSTAGS
+        assert os.path.exists(self.attach)
+        content = open(self.attach, "rb").read()
+
+        with Image.open(self.input) as Img:
+            # 确保图片处于RGB模式
+            img = Img.convert("RGB")
+            # 读取ICC Profile (这个应该是你编辑好的包含隐写数据的Profile)
+            # 保存图片，附加ICC Profile
+            img.save(self.output, "JPEG", icc_profile=content)
+            log.info(f"{self.attach} 已写入 {self.output}")
+
         import piexif
         # 载入JPEG图片的EXIF数据
-        exif_dict = piexif.load("one_pixel.jpg")
-
-        # 将文件作为二进制数据读入
-        with open("__init__.py", "rb") as f:
-            file_data = f.read()
-
+        exif_dict = piexif.load(self.output)
         # 将二进制数据存储在EXIF注释字段中
-        exif_dict["Exif"][piexif.ExifIFD.UserComment] = file_data
-        # strace()
+        # exif_dict["Exif"][piexif.ExifIFD.UserComment] = util.md5sum(self.attach).encode("utf-8")
+        exif_dict["Exif"][piexif.ExifIFD.UserComment] = self.tool.sign(content).encode("utf-8")
+
         # exif_dict["Exif"][piexif.ExifIFD.Copyright] = "e4ting"
-        exif_dict['0th'][piexif.ImageIFD.Artist] = util.md5sum("__init__.py")
+        # exif_dict['0th'][piexif.ImageIFD.Artist] = md5sum("__init__.py")
 
         # 将修改后的EXIF数据写回图片
-        exif_bytes = piexif.dump(exif_dict)
-        piexif.insert(exif_bytes, "one_pixel.jpg")
+        piexif.insert(piexif.dump(exif_dict), self.output)
 
     def create_one_pixel(self):
         from PIL import Image
 
         # 创建一个只有1个像素的图像，颜色为白色
         img = Image.new('RGB', (1, 1), color = 'white')
 
         # 保存图像为JPEG格式
-        img.save('one_pixel.jpg', 'JPEG')
+        img.save(self.input, 'JPEG')
+        log.info(f"写入 {self.input}")
 
+def argv_parse():
+    import argparse
+    parser = argparse.ArgumentParser(
+        prog=sys.argv[0],
+        description="jpg隐写"
+    )
+    parser.add_argument(
+        '-c', '--create',
+        action='store_true',
+        default=False,
+        help='创建一张只有一个像素的jpg'
+    )
+    parser.add_argument(
+        '-k', '--key',
+        action='store',
+        type=str,
+        default='',
+        help='sm2私钥证书, openssl ecparam -out key.pem -name SM2 -param_enc explicit -genkey'
+    )
+    parser.add_argument(
+        '-p', '--pub',
+        action='store',
+        type=str,
+        default='042d08dfd0674eb85d2cff13c9f755ffd0207b8235abff58231158e7c86d88aacb912034ca0243672450d89973e91756d1105990e544290b12c1b89e5d71457076',
+        help='sm2公钥证书, openssl ec -in key.pem -pubout -out pub.pem'
+    )
+    parser.add_argument(
+        '-t', '--target',
+        action='store',
+        type=str,
+        default='test.jpg',
+        help='目标图片'
+    )
+    parser.add_argument(
+        '-a', '--attach',
+        action='store',
+        type=str,
+        default=None,
+        help='隐写的内容,cluster.tar.gz'
+    )
+    return parser.parse_args()
 
 if __name__ == '__main__':
-    # Hidden().create_one_pixel()
-    Hidden().write()
-    data = Hidden().read()
-    log.info(data)
+    op = argv_parse()
+
+    tool = SM2(key=op.key, pub=op.pub)
+    # tool.sign(file=op.target)
+
+    hid = Hidden(inputs=op.target, output=f"{op.target}.jpg", attach=op.attach, tool=tool)
+    if op.create:
+        hid.create_one_pixel()
+    elif op.attach:
+        hid.write()
+    else:
+        data = hid.read()
+
+        log.info(data[:128])
+
```

## Comparing `e4ting-1.1.3485.dist-info/RECORD` & `e4ting-1.1.3494.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -61,20 +61,20 @@
 e4ting/server/util.py,sha256=h11evQY5aGMIUCTp-ozqH-UR3bAobr4oGAuPfpgjXsk,1420
 e4ting/task/__init__.py,sha256=NUz0Vyl7dk7bXxsfvCKceLwl_o66IRDxV92Ao0ccQKk,168
 e4ting/task/base.py,sha256=727nfSR7P110Vpd7AUCvyHYoai6KxTbdqKoFTBgOKiU,4305
 e4ting/task/celeryproxy.py,sha256=fwkvhozBq7BgYRthdEnD19cqsMHQUr54o1c2pR6Eyd4,2241
 e4ting/task/master.py,sha256=Gwv-kB37qN_GaBcCtK7QtXF01Bn4GNRbET1EIzqqj4w,1416
 e4ting/task/worker.py,sha256=yYYCBgKZRtkG7i5y6VYxYfSZFkI1z_Trt7z0C_oILgc,1966
 e4ting/util/__init__.py,sha256=gb4jYL3-UISuNxIMGTugT8Fs6xU7QNImdYjTUkzwqxg,420
-e4ting/util/common.py,sha256=EYFciiucTtGCXRqL63Bs1r4ahHHFZ4TpW8Iv9BomfXU,22823
+e4ting/util/common.py,sha256=1CoXk-drHnrFRe3xD-kAMrJgbe_7b9exuvTfF8PFgjU,22896
 e4ting/util/feichang.py,sha256=vg8ozhvMWD8rH0QKhpgmqwub1k-uPOTij0nJM46eaRc,1992
 e4ting/util/fuser.py,sha256=uv_FC6ykbvBMGmsF14AaFbfdR_MQ9Rg7QKEjjpBQjnU,6067
 e4ting/util/hardware.py,sha256=Lggg1RzeCFpgVFc0Xf_2rHTNBQJvn1bjbn53xsmSNKw,3091
-e4ting/util/hidden.py,sha256=WIL6HZHYmbaY7KjdC3crvNzRomGS_1XiJBETy1b8mcU,1799
+e4ting/util/hidden.py,sha256=qqPWg4jXfHYB5Q1P1XQZXK2nmm1vLDKtDYdu_S7l2uA,5163
 e4ting/util/remote_fuser.py,sha256=majAgjjQx1Jf2ziozDNwebNgEpz9Bi5eR0wPwGjmVPs,7172
 e4ting/util/rsa.py,sha256=uakqI6fblQpjF-D8xnLvT6QoVVojw-w-dbHHu0vUE2c,705
 e4ting/util/url2img.py,sha256=km0FY74dhUt5VdD_5X78v3YJVtxmtK7H60d-dI7lhUk,2038
 e4ting/util/util.py,sha256=ikwiRkkaXRoe8VSE0RMGLHqNDQp49MtR4gfbiB0F5F0,9242
-e4ting-1.1.3485.dist-info/METADATA,sha256=CJerQaBr5JDJ6nQ0X9LbmsQ_wxzyXdOGXnj1w0mONkM,54
-e4ting-1.1.3485.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-e4ting-1.1.3485.dist-info/top_level.txt,sha256=FOXYrwZIzEGe_-8MjO-MyYRLlhDuGbeoyZsIXtwVhL4,22
-e4ting-1.1.3485.dist-info/RECORD,,
+e4ting-1.1.3494.dist-info/METADATA,sha256=z7j6_gjzY_tUFLCfRpj-AAtrVcugSzDn2bKnEaqdsEA,54
+e4ting-1.1.3494.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+e4ting-1.1.3494.dist-info/top_level.txt,sha256=FOXYrwZIzEGe_-8MjO-MyYRLlhDuGbeoyZsIXtwVhL4,22
+e4ting-1.1.3494.dist-info/RECORD,,
```

